[TOC]

#### 二叉堆/最大最小堆

##### 基础知识

- 二叉堆的定义：

  - 是一颗完全二叉树；
  - 堆树中某个节点总是不大于(不小于)其孩子节点的值；
  - 堆树中每个节点的子树都是堆树；

- 大顶堆：任何一个父节点的值大于其左右孩子节点的值；

  小顶堆：任何一个父节点的值小于其左右孩子节点的值；

- 可以实现0(logN)效率插入删除，O(1)效率实现**最值查询**，一般使用数组实现二叉堆。


##### 插入中的修正操作---上浮

插入元素的步骤：

- 直接将元素插入数组末尾；
- 从插入节点开始，进行siftUp操作：
  - 该节点已经为根节点，siftUp操作完成；
  - 该节点比根节点小，siftUp操作完成；
  - 该节点比根节点大，则交换两节点。更新当前节点，重复siftUP操作。

##### 删除/构建中的修正操作---下沉操作

删除堆顶元素步骤：

- 将堆顶节点和数组末尾节点交换；
- 从堆顶节点开始，进行siftDown操作：
  - 该节点不存在孩子节点。则siftDown操作完成；
  - 该节点比左右孩子节点大，则siftDown操作完成；
  - 该节点比孩子节点小，则将该节点和最大的孩子节点交换。更新当前节点，重复siftDown操作。

##### 构建二叉堆

将无序的完全二叉树构造成二叉堆。

- 从数组末尾开始，以第一个非叶子节点为起始点，以当前节点为根节点进行siftDown操作，一直到数组首元素；
- 第一个非叶子节点：数组长度/2-1;

##### 实际应用

- 实现优先队列
- TopK问题

##### 编码实现

- 用数组实现，最好有一个get()方法用于获取数组元素，当越界时返回适当值(最大值或最小值)。
- 

