##### 索引优缺点

1. 索引优点：
   - 索引大大减小了服务器需要扫描的数据量，加快了数据检索速度，
   - 索引可以帮助服务器避免排序和创建临时表
   - 索引可以将随机IO变成顺序IO
   - InnoDB对索引支持行级锁，提高表并发性
   - 
2. 索引缺点
   - 创建和维护索引耗费时间，对数据进行增删改时，索引也需要动态维护
   - 索引需要额外空间，如果是聚簇索引，需要占用更多空间
   - 对于非常小的表，全表扫描更搞笑

##### 创建索引规则

1. 应该创建索引的列
   - **经常需要搜索的列**
   - **作为主键的列**，强制该列的唯一性和组织表中数据的排列结构
   - **经常用在连接(jion)的列**，这些列主要是外键，加快连接速度
   - **经常需要根据范围**(<，=，>，IN，BETWEEN)进行搜索的列，因为索引已经排序
   - **经常需要排序(order by)的列**，因为索引已经排序，可以利用索引排序，加快排序查询时间
   - **经常使用在WHERE中的列**，加快条件判断速度5
2. 不该创建索引的列
   - 在**查询中很少涉及到的列**，有无索引并不能提高查询速度，反而会因为增加了索引，需要额外存储空间和维护索引
   - 只有**很少数据值或者重复值较多的列**(例如性别)，
   - **数据类型为text，image，bit等的列**，这些列的数据量要么太大要么太小
   - **修改性能要求远远高于检索性能的列**，修改性能和检索性能是相互矛盾的

##### 索引结构

1. B树特征
   - 关键字和行数据可存储在任意节点
   - 任何一个关键字只会在某个节点中出现一次
   - 搜索性能不稳定，最好O(1)，最差O(logN)
   - 自平衡
2. B+树特征
   - 行数据只存放在叶子结点，内部节点只存放关键字
   - 关键字在内部节点和叶子结点会重复一次
   - 搜索性能稳定，只会在叶子节点命中，
   - 每一个叶子节点都包含指向下一个叶子结点的指针，方便排序和范围遍历
3. Hash特征
   - 查找性能强，O(1)
   - 依赖于hash函数，会出现hash冲突；hash冲突严重时，会浪费存储空间，恶化查找性能
   - 只支持精确查找，不支持排序和范围查找

索引分类

1. 逻辑索引

   - 主键索引：一张表只能有一个字段作为主键，主键值不能重复，不能为null
   - 唯一索引：一张表可以有多个字段可以作为唯一索引，数据值唯一，可以为null
   - 普通索引：一张表可以有多个字段作为普通索引，一个普通索引可以包含多个字段，允许数据重复，可以为null
   - 全文索引：

2. 按列数分类

   - 单例索引：一个索引对应一个字段，一张表可以有多个单例索引
   - 组合索引：一个组合索引包含两个及以上的字段，查询的时候遵循mysql组合索引的"最左前缀”原则：使用where时条件要按照建立组合索引时字段排列方式排序，组合索引才会生效

3. 物理分类：

   - 聚簇索引：行数据和索引存储在一块，找到索引即找到行数据。依赖于B+树实现，行数据和关键字共同存储在B+树的叶子结点中。

   - 非聚簇索引：行数据和索引分开存储，B+树叶子结点不存放行数据。

      ![img](https://img-blog.csdnimg.cn/20210201172450840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdmZWlqaXU=,size_16,color_FFFFFF,t_70) 

4. 聚簇索引的优缺点

   - 优点：数据访问更快；聚簇索引对主键的排序查找和范围查找快
   - 缺点：插入速度依赖排序速度，按照主键顺序插入式是最快的方式，否则会出现页分裂；更新主键的代价很高，要移动被更新的行。

5. 