# 性能与安全

## 预编译头文件

经常使用的头文件可以作为预编译头文件，提高项目编译速度。

## 多维数组

多维数组的内存分配容易造成内存碎片，导致访问时`cache miss`，降低效率，可以使用一维数组代替多维数组。一维数组代替多维数组存储数据，更简单，访问效率更高。

多维数组转化为一维数组的一种遍历方式：
```c++
//二维数组
int** arr = new int * [5];
for(int i = 0;i < 5; i++){
    arr[i] = new int[5];
}
//遍历二维数组
for(int i = 0;i < 5; i++){
    for(int j = 0; j < 5; j++){
        arr[i][j] = 0;
    }
}

//二维数组转化为一维数组后
int* arr2 = new int[5 * 5];
//遍历一维数组
for(int i = 0; i < 5; i++){
    for(int j = 0; j < 5; j++){
        arr[i + j * 5] = 0;
    }
}
```

## 多线程

-  std::thread
- std::async()/std::future 
- std::lock_guard<std::mutex>()

## 字符串

### 字符串视图std::string_view
 
类似Go中切片的概念，string_view指向字符串str，并记录一个size，只能访问该字符串前size字节的内容。
**开销小，使用字符串时使用string_view可以避免不必要的内存分配 **

```c++

const char* name = "Yan Chernikov"

std::string_view firstName(name,3);
std::string_view lastName(name+4,9);

```